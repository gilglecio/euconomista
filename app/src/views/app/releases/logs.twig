{% extends 'app/base.twig' %}

{% block pageTitle title %}

{% block app %}

    <ol class="breadcrumb">
        <li>Lançamento nº <strong>{{ release.number }}</strong></li>
        
        {% if canLiquidar %}
        <li><a href="/app/releases/{{ release.id }}/liquidar">Liquidar</a></li>
        {% endif %}

        {% if canDesfazer %}
        <li><a onclick="return confirm('Deseja realmente DESFAZER a última ação?')" href="/app/releases/{{ release.id }}/desfazer">Desfazer</a></li>
        {% endif %}

        {% if not canDesfazer %}
        <li><a href="/app/releases/{{ release.id }}/form">Editar</a></li>
        {% endif %}

        <li><a onclick="return confirm('Deseja realmente APAGAR este lançamento?')" style="color:red" href="/app/releases/{{ release.id }}/delete">Apagar este lançamento</a></li>
        <li><a onclick="return confirm('Deseja realmente APAGAR este + as outras parcelas deste lançamento?')" style="color:red" href="/app/releases/{{ release.id }}/delete_all">Apagar todos os lançamentos deste documento</a></li>
    </ol>

    {% include 'macro.twig' with {error:error} %}

    <table class="table">
    	<thead>
    		<tr>
                <th>Ação</th>
                <th>Data</th>
                <th class="text-right">Valor</th>
    			<th>Usuário</th>
    		</tr>
    	</thead>

    	<tbody>
    		{% for row in rows %}
    		<tr>
                <td>{{ row.action }}</td>
                <td>{{ row.date }}</td>
                <td class="text-right">{{ row.value }}</td>
                <td>{{ row.user }}</td>
    		</tr>
    		{% endfor %}

    		{% if not rows|length %}
            <tr>
                <td colspan="5">Sem registros.</td>
            </tr>
            {% endif %}
    	</tbody>
    </table>
{% endblock %}